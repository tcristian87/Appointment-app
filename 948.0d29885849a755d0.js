"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[948],{948:(U,Z,p)=>{p.r(Z),p.d(Z,{AppointmentsDetailsPageModule:()=>j});var c=p(6019),h=p(9010),e=p(7328),l=p(1077),t=p(865),v=p(9927);const g=function(i){return["/","appointments-details","appointments-edit",i]},b=[{path:"",component:(()=>{class i{constructor(n,o,s){this.route=n,this.navCtrl=o,this.appointsService=s}ngOnInit(){this.route.paramMap.subscribe(n=>{n.has("appointId")?this.appointSub=this.appointsService.getAppoint(n.get("appointId")).subscribe(o=>{this.appoint=o}):this.navCtrl.navigateBack("/home/tabs/book-appointment")})}ngOnDestroy(){this.appointSub&&this.appointSub.unsubscribe()}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(l.gz),t.Y36(e.SH),t.Y36(v.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-appointments-details"]],decls:35,vars:11,consts:[["color","primary"],["slot","start"],["defaultHref","/home/tabs/book-appointment"],["slot","end"],[3,"routerLink"],["size","12","size-sm","8","offset-sm","2"],["color","primary",1,"ion-text-center"],["lines","none"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-buttons",3),t.TgZ(5,"ion-button",4),t._uU(6,"Edit"),t.qZA(),t.qZA(),t.TgZ(7,"ion-title"),t._uU(8,"Appoint Details"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-content"),t.TgZ(10,"ion-grid"),t.TgZ(11,"ion-row"),t.TgZ(12,"ion-col",5),t.TgZ(13,"ion-card-header"),t.TgZ(14,"ion-card-title",6),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"ion-card"),t.TgZ(17,"ion-col"),t.TgZ(18,"ion-item"),t.TgZ(19,"ion-label"),t._uU(20,"Hour"),t.qZA(),t._uU(21),t.qZA(),t.TgZ(22,"ion-item"),t.TgZ(23,"ion-label"),t._uU(24,"Date"),t.qZA(),t._uU(25),t.ALo(26,"date"),t.qZA(),t.TgZ(27,"ion-item"),t.TgZ(28,"ion-label"),t._uU(29,"Phone"),t.qZA(),t._uU(30),t.qZA(),t.TgZ(31,"ion-item",7),t.TgZ(32,"ion-label"),t._uU(33,"Service"),t.qZA(),t._uU(34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("routerLink",t.VKq(9,g,o.appoint.id)),t.xp6(10),t.hij(" ",o.appoint.name," "),t.xp6(6),t.hij(" ",o.appoint.hour,""),t.xp6(4),t.hij(" ",t.xi3(26,6,o.appoint.date,"EEEE MMM dd y"),""),t.xp6(5),t.hij(" ",o.appoint.phone,""),t.xp6(4),t.hij(" ",o.appoint.service,""))},directives:[e.Gu,e.sr,e.Sm,e.oU,e.cs,e.YG,e.YI,l.rH,e.wd,e.W2,e.jY,e.Nd,e.wI,e.Zi,e.Dq,e.PM,e.Ie,e.Q$],pipes:[c.uU],styles:[""]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[l.Bz.forChild(b)],l.Bz]}),i})(),j=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,h.u5,e.Pc,T]]}),i})()},9927:(U,Z,p)=>{p.d(Z,{f:()=>j});var c=p(8053),h=p(5722),e=p(6636),l=p(9204),t=p(4099),v=p(2411);class g{constructor(a,n,o,s,A,m,d){this.id=a,this.name=n,this.phone=o,this.hour=s,this.date=A,this.service=m,this.userId=d}}var f=p(865),b=p(7079),T=p(4522);let j=(()=>{class i{constructor(n,o){this.authService=n,this.http=o,this._appoints=new t.X([])}get appoints(){return this._appoints.asObservable()}fetchAppoints(){return this.http.get("https://ionic-appoint-app-default-rtdb.europe-west1.firebasedatabase.app/appoints.json").pipe((0,c.U)(n=>{const o=[];for(const s in n)n.hasOwnProperty(s)&&o.push(new g(s,n[s].name,n[s].phone,n[s].hour,n[s].date,n[s].service,n[s].userId));return o}),(0,h.b)(n=>{this._appoints.next(n)}))}getAppoint(n){return this.appoints.pipe((0,e.q)(1),(0,c.U)(o=>Object.assign({},o.find(s=>s.id===n))))}addAppoint(n,o,s,A,m){let d;const u=new g(Math.random().toString(),n,o,s,A,m,this.authService.userId);return this.http.post("https://ionic-appoint-app-default-rtdb.europe-west1.firebasedatabase.app/appoints.json",Object.assign(Object.assign({},u),{id:null})).pipe((0,l.w)(r=>(d=r.name,this.appoints)),(0,e.q)(1),(0,h.b)(r=>{u.id=d,this._appoints.next(r.concat(u))}))}updateAppoint(n,o,s,A,m,d){let u;return this.appoints.pipe((0,e.q)(1),(0,l.w)(r=>!r||r.length<=0?this.fetchAppoints():(0,v.of)(r)),(0,l.w)(r=>{const S=r.findIndex(y=>y.id===n);u=[...r];const P=u[S];return u[S]=new g(P.id,o,s,A,m,d,P.userId),this.http.put(`https://ionic-appoint-app-default-rtdb.europe-west1.firebasedatabase.app/appoints/${n}.json`,Object.assign(Object.assign({},u[S]),{id:null}))}),(0,h.b)(()=>{this._appoints.next(u)}))}}return i.\u0275fac=function(n){return new(n||i)(f.LFG(b.e),f.LFG(T.eN))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);